(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5231],{26126:(e,t,s)=>{"use strict";s.d(t,{E:()=>d});var n=s(95155);s(12115);var i=s(74466),r=s(59434);let a=(0,i.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:s,...i}=e;return(0,n.jsx)("div",{className:(0,r.cn)(a({variant:s}),t),...i})}},65019:(e,t,s)=>{"use strict";s.d(t,{U:()=>o,Y:()=>c});var n=s(95155),i=s(12115),r=s(87481);let a=[{id:"c1",code:"SUMMER10",type:"percentage",value:10,status:"active",usageLimit:100,timesUsed:25,expiryDate:"2024-12-31"},{id:"c2",code:"WELCOME50",type:"fixed",value:50,status:"active",usageLimit:500,timesUsed:150,expiryDate:"2025-01-31"},{id:"c3",code:"DIWALI2023",type:"percentage",value:15,status:"expired",usageLimit:200,timesUsed:200,expiryDate:"2023-11-15"},{id:"c4",code:"MONSOON",type:"fixed",value:75,status:"disabled",usageLimit:50,timesUsed:10,expiryDate:"2024-09-30"}],d=(0,i.createContext)(void 0),o=e=>{let{children:t}=e,[s,o]=(0,i.useState)(a),{toast:c}=(0,r.dj)();return(0,n.jsx)(d.Provider,{value:{coupons:s,addCoupon:e=>{let t={...e,id:"coup_".concat(new Date().getTime()),timesUsed:0};o(e=>[t,...e]),c({title:"Coupon Added",description:'Coupon "'.concat(t.code,'" has been created.')})},updateCoupon:(e,t)=>{o(s=>s.map(s=>s.id===e?{...s,...t}:s)),c({title:"Coupon Updated",description:'Coupon "'.concat(t.code,'" has been updated.')})},deleteCoupon:e=>{let t=s.find(t=>t.id===e);o(t=>t.filter(t=>t.id!==e)),c({variant:"destructive",title:"Coupon Deleted",description:'Coupon "'.concat(null==t?void 0:t.code,'" has been removed.')})},getCouponById:e=>s.find(t=>t.id===e)},children:t})},c=()=>{let e=(0,i.useContext)(d);if(void 0===e)throw Error("useCoupon must be used within a CouponProvider");return e}},75961:(e,t,s)=>{Promise.resolve().then(s.bind(s,99341))},94394:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(40157).A)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},99341:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var n=s(95155),i=s(65267),r=s(30285),a=s(34301),d=s(6874),o=s.n(d),c=s(65019),l=s(12115),u=s(35695),x=s(36268),h=s(11032),p=s(94394),v=s(3561),g=s(44838),m=s(85127),j=s(26126),f=s(90010);function y(e){var t;let{data:s}=e,i=(0,u.useRouter)(),{deleteCoupon:a}=(0,c.Y)(),[d,o]=l.useState(!1),[y,C]=l.useState(null),b=[{accessorKey:"code",header:"Code",cell:e=>{let{row:t}=e;return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"}),(0,n.jsx)("span",{className:"font-medium",children:t.original.code})]})}},{accessorKey:"discount",header:"Discount",cell:e=>{let{row:t}=e,s=t.original;return"percentage"===s.type?"".concat(s.value,"%"):"â‚¹".concat(s.value.toFixed(2))}},{accessorKey:"status",header:"Status",cell:e=>{let{row:t}=e,s=t.original.status;return(0,n.jsx)(j.E,{variant:{active:"default",expired:"destructive",disabled:"secondary"}[s],className:"capitalize",children:s})}},{accessorKey:"usage",header:"Usage",cell:e=>{let{row:t}=e;return"".concat(t.original.timesUsed," / ").concat(t.original.usageLimit)}},{accessorKey:"expiryDate",header:"Expires On",cell:e=>{let{row:t}=e;return new Date(t.original.expiryDate).toLocaleDateString()}},{id:"actions",cell:e=>{let{row:t}=e,s=t.original;return(0,n.jsxs)(g.rI,{children:[(0,n.jsx)(g.ty,{asChild:!0,children:(0,n.jsxs)(r.$,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,n.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,n.jsx)(v.A,{className:"h-4 w-4"})]})}),(0,n.jsxs)(g.SQ,{align:"end",children:[(0,n.jsx)(g.lp,{children:"Actions"}),(0,n.jsx)(g._2,{onClick:()=>i.push("/admin/coupons/".concat(s.id,"/edit")),children:"Edit"}),(0,n.jsx)(g.mB,{}),(0,n.jsx)(g._2,{className:"text-destructive focus:bg-destructive/10 focus:text-destructive",onClick:()=>{C(s),o(!0)},children:"Delete"})]})]})}}],N=(0,x.N4)({data:s,columns:b,getCoreRowModel:(0,h.HT)(),getPaginationRowModel:(0,h.kW)()});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"rounded-md border",children:(0,n.jsxs)(m.XI,{children:[(0,n.jsx)(m.A0,{children:N.getHeaderGroups().map(e=>(0,n.jsx)(m.Hj,{children:e.headers.map(e=>(0,n.jsx)(m.nd,{children:e.isPlaceholder?null:(0,x.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,n.jsx)(m.BF,{children:(null==(t=N.getRowModel().rows)?void 0:t.length)?N.getRowModel().rows.map(e=>(0,n.jsx)(m.Hj,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,n.jsx)(m.nA,{children:(0,x.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,n.jsx)(m.Hj,{children:(0,n.jsx)(m.nA,{colSpan:b.length,className:"h-24 text-center",children:"No coupons found."})})})]})}),(0,n.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,n.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>N.previousPage(),disabled:!N.getCanPreviousPage(),children:"Previous"}),(0,n.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>N.nextPage(),disabled:!N.getCanNextPage(),children:"Next"})]}),(0,n.jsx)(f.Lt,{open:d,onOpenChange:o,children:(0,n.jsxs)(f.EO,{children:[(0,n.jsxs)(f.wd,{children:[(0,n.jsx)(f.r7,{children:"Are you absolutely sure?"}),(0,n.jsxs)(f.$v,{children:['This action cannot be undone. This will permanently delete the coupon "',null==y?void 0:y.code,'".']})]}),(0,n.jsxs)(f.ck,{children:[(0,n.jsx)(f.Zr,{children:"Cancel"}),(0,n.jsx)(f.Rx,{variant:"destructive",onClick:()=>{y&&a(y.id),o(!1)},children:"Delete"})]})]})})]})}function C(){let{coupons:e}=(0,c.Y)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)(i.z,{children:"Coupons"}),(0,n.jsx)(r.$,{asChild:!0,children:(0,n.jsxs)(o(),{href:"/admin/coupons/new",children:[(0,n.jsx)(a.A,{className:"mr-2 h-4 w-4"}),"Add New Coupon"]})})]}),(0,n.jsx)(y,{data:e})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4277,6874,9035,6364,4547,3719,6268,5086,4295,8441,1684,7358],()=>t(75961)),_N_E=e.O()}]);